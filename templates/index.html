{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">Rap Lyrics Generator by TRHACKNON</h1>

    <div class="row">
        <div class="col-md-6">
            <form id="lyricForm">
                <div class="mb-3">
                    <label for="theme" class="form-label">Theme</label>
                    <input type="text" class="form-control" id="theme" required>
                </div>
                <div class="mb-3">
                    <label for="style" class="form-label">Style</label>
                    <input type="text" class="form-control" id="style" required>
                </div>
                <div class="mb-3">
                    <label for="rhymeScheme" class="form-label">Rhyme Scheme</label>
                    <select class="form-select" id="rhymeScheme" required>
                        <option value="AABB">AABB</option>
                        <option value="ABAB">ABAB</option>
                        <option value="AAAA">AAAA</option>
                        <option value="ABBA">ABBA</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="flow" class="form-label">Flow</label>
                    <select class="form-select" id="flow" required>
                        <option value="drill">drill</option>
                        <option value="choppy">Choppy</option>
                        <option value="fast">Fast</option>
                        <option value="slow">Slow</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Generate Lyrics</button>
            </form>
        </div>
        <div class="col-md-6">
            <h3>Generated Lyrics</h3>
            <div id="lyricsOutput" class="border p-3 mb-3" style="min-height: 200px;"></div>
            <button id="copyLyrics" class="btn btn-secondary">Copy Lyrics</button>
            <button id="exportLyrics" class="btn btn-info">Export Lyrics</button>
            {% if current_user.is_authenticated %}
            <button id="saveLyrics" class="btn btn-success">Save Favorite</button>
            {% endif %}
        </div>
    </div>
    <div class="row mt-4">
        <div class="col-12">
            <h3>Select Instrumental Track</h3>
            <select id="trackSelector" class="form-select mb-3">
                <option value="">Choose a track...</option>
                {% for track in tracks %}
                <option value="{{ track }}">{{ track }}</option>
                {% endfor %}
            </select>
            <audio id="audioPlayer" controls controlsList="nodownload" class="w-100"></audio>
            {% if current_user.is_authenticated %}
            <button id="saveTrack" class="btn btn-success mt-2">Save Favorite Track</button>
            {% endif %}
        </div>
    </div>
</div>

<script>
    const logo = document.querySelector('.logo-svg');
    
    function randomPosition() {
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;
        
        // Calculer une position aléatoire à l'intérieur des limites de la fenêtre
        const x = Math.random() * (windowWidth - 100); // -100 pour éviter que le logo sorte de la vue
        const y = Math.random() * (windowHeight - 100); // -100 pour éviter que le logo sorte de la vue
        
        // Appliquer la position
        logo.style.left = `${x}px`;
        logo.style.top = `${y}px`;
    }

    // Déplacer le scarabé à une position aléatoire toutes les 2 secondes
    setInterval(randomPosition, 2000);
</script>
{% endblock %}
